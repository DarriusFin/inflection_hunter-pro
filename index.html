<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Inflection Hunter Pro v6.0 │ Darrius FinTech Inc</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/lightweight-charts@4.1.3/dist/lightweight-charts.standalone.production.js"></script>
<script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js"></script>
<style>
  :root{--bg:#0a0e17;--card:#161b22;--border:#30363d;--green:#00ff88;--red:#ff4757;--text:#e6edf3;--text2:#8b949e;}
  *{margin:0;padding:0;box-sizing:border-box;}
  body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;background:var(--bg);color:var(--text);height:100vh;overflow:hidden;background:radial-gradient(circle at top left,#1a1f2e,#0a0e17);}
  #topbar{height:64px;background:rgba(22,27,34,0.98);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;padding:0 32px;z-index:100;}
  #brand{display:flex;align-items:center;gap:18px;}
  #brandLogo{font-size:34px;font-weight:900;background:linear-gradient(90deg,#00ff88,#00d4ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
  #brandName{font-size:22px;font-weight:800;}
  #company{font-size:13px;color:var(--text2);margin-top:2px;}
  #status{background:rgba(0,255,136,0.15);color:var(--green);padding:10px 20px;border-radius:12px;font-size:14px;font-weight:600;}
  #copyright{font-size:13px;color:#ffffff;opacity:0.85;font-weight:500;background:rgba(0,0,0,0.4);padding:6px 18px;border-radius:20px;}
  #main{display:flex;height:calc(100vh - 64px);}
  #chartArea{flex:1;position:relative;background:#000;}
  #watermark{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) rotate(-20deg);font-size:9rem;font-weight:900;opacity:0.08;color:var(--red);pointer-events:none;z-index:5;}
  #sidebar{width:400px;background:var(--card);border-left:1px solid var(--border);display:flex;flex-direction:column;}
  .panel{background:rgba(255,255,255,0.04);border-bottom:1px solid var(--border);padding:24px;}
  .panel h3{color:var(--green);font-size:17px;margin-bottom:18px;display:flex;align-items:center;gap:8px;}
  .panel h3::before{content:"◆";font-size:12px;}
  #signals{max-height:380px;overflow-y:auto;padding-right:8px;}
  .signal{padding:12px 16px;margin:8px 0;border-radius:12px;font-size:14px;animation:slideIn .4s;border-left:4px solid;}
  .buy{background:rgba(0,255,136,0.12);border-color:var(--green);}
  .sell{background:rgba(255,71,87,0.12);border-color:var(--red);}
  @keyframes slideIn{from{opacity:0;transform:translateX(30px)}to{opacity:1;transform:translateX(0)}}
  .tf-buttons{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px;}
  .tf-btn{padding:10px 18px;background:rgba(255,255,255,0.08);border:1px solid var(--border);border-radius:12px;font-size:14px;cursor:pointer;transition:all .3s;}
  .tf-btn.active{background:var(--green);color:#000;border-color:var(--green);font-weight:bold;}
  select,input[type=checkbox]{width:100%;padding:12px;background:rgba(255,255,255,0.06);border:1px solid var(--border);border-radius:12px;color:var(--text);margin:8px 0;}
  #paywall{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.97);backdrop-filter:blur(20px);z-index:9999;display:none;align-items:center;justify-content:center;flex-direction:column;padding:20px;text-align:center;}
  #paywall h1{font-size:4rem;margin-bottom:20px;background:linear-gradient(90deg,#00ff88,#00d4ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
  #paywall .cards{display:flex;gap:30px;flex-wrap:wrap;justify-content:center;margin:50px 0;}
  .card{background:rgba(255,255,255,0.06);border:1px solid var(--border);border-radius:20px;padding:36px 30px;width:300px;transition:all .4s;box-shadow:0 8px 32px rgba(0,0,0,0.3);}
  .card:hover{transform:translateY(-15px);border-color:var(--green);}
  .card.popular{border:3px solid var(--green);position:relative;}
  .card.popular::after{content:"BEST VALUE";position:absolute;top:-14px;left:50%;transform:translateX(-50%);background:var(--green);color:#000;padding:8px 32px;border-radius:30px;font-size:14px;font-weight:bold;}
  .price{font-size:3.6rem;font-weight:bold;margin:20px 0;}
  .btn-pay{width:100%;padding:18px;margin-top:24px;border:none;border-radius:16px;font-size:1.3rem;font-weight:bold;cursor:pointer;background:linear-gradient(90deg,#00ff88,#00d4ff);color:#000;transition:all .3s;}
  .btn-pay:hover{transform:scale(1.05);box-shadow:0 12px 40px rgba(0,255,136,0.5);}
  #closePay{position:absolute;top:25px;right:35px;font-size:36px;cursor:pointer;opacity:0.8;}
  #upgradeBtn{position:fixed;bottom:30px;right:30px;background:linear-gradient(135deg,#00ff88,#00d4ff);color:#000;padding:16px 36px;border-radius:50px;font-size:18px;font-weight:bold;cursor:pointer;z-index:100;box-shadow:0 8px 30px rgba(0,255,136,0.4);transition:all .3s;}
  #upgradeBtn:hover{transform:scale(1.08);box-shadow:0 12px 40px rgba(0,255,136,0.6);}
</style>
</head>
<body>

<div id="topbar">
  <div id="brand">
    <div id="brandLogo">Inflection Hunter</div>
    <div>
      <div id="brandName">Inflection Hunter Pro</div>
      <div id="company">Darrius FinTech Inc</div>
    </div>
  </div>
  <div style="display:flex;align-items:center;gap:25px;">
    <div id="status">Free Version · 60s Signal Delay</div>
    <div id="copyright">© 2025 Darrius FinTech Inc. All Rights Reserved.</div>
  </div>
</div>

<div id="main">
  <div id="chartArea">
    <div id="chartContainer"></div>
    <div id="watermark">FREE VERSION</div>
  </div>

  <div id="sidebar">
    <div class="panel">
      <h3>Symbol & Timeframe</h3>
      <select id="symbol">
        <option value="BTCUSDT">BTC/USDT</option>
        <option value="ETHUSDT">ETH/USDT</option>
        <option value="SOLUSDT">SOL/USDT</option>
        <option value="BNBUSDT">BNB/USDT</option>
      </select>
      <div class="tf-buttons">
        <button class="tf-btn active" data-tf="1m">1min</button>
        <button class="tf-btn" data-tf="5m">5min</button>
        <button class="tf-btn" data-tf="15m">15min</button>
        <button class="tf-btn" data-tf="1h">1hour</button>
      </div>
    </div>

    <div class="panel">
      <h3>Live Signals</h3>
      <div id="signals">Loading data...</div>
    </div>

    <div class="panel">
      <h3>Settings</h3>
      <label><input type="checkbox" id="showZigZag" checked> Show ZigZag Line</label><br><br>
      <label><input type="checkbox" id="sound" checked> Sound Alert (Pro only)</label>
    </div>

    <div class="panel" style="flex:1;text-align:center;padding-top:60px;">
      <p style="color:var(--text2);font-size:15px;line-height:1.8;">
        World's Leading On-Chain Inflection Detection<br>
        Exclusively developed by <strong>Darrius FinTech Inc</strong>
      </p>
    </div>
  </div>
</div>

<!-- Floating Upgrade Button -->
<div id="upgradeBtn" onclick="document.getElementById('paywall').style.display='flex'">
  Upgrade to Pro → Real-time Signals
</div>

<!-- Payment Modal -->
<div id="paywall">
  <div id="closePay" onclick="this.parentElement.style.display='none'">×</div>
  <h1>Inflection Hunter Pro</h1>
  <p style="font-size:1.6rem;margin:30px 0;color:#00ff88;">Official Version by Darrius FinTech Inc</p>
  <p style="font-size:1.4rem;margin:20px 0;max-width:800px;">
    Real-time precision signals · Remove delay & watermark · Voice + popup alerts · Lifetime updates
  </p>
  <div class="cards">
    <div class="card">
      <h3 style="font-size:1.7rem;margin-bottom:12px;">Monthly</h3>
      <div class="price">$19.99</div>
      <p style="color:#aaa;margin:20px 0;">Billed monthly<br>Cancel anytime</p>
      <button class="btn-pay" onclick="location.href='https://buy.stripe.com/test_00g6oJ4QZ9ef8w05kl'">Choose Monthly</button>
    </div>
    <div class="card popular">
      <h3 style="font-size:1.7rem;margin-bottom:12px;">Annual</h3>
      <div class="price">$99</div>
      <p style="color:#aaa;margin:20px 0;"><strong>Only $8.25/month</strong><br><mark style="background:#00ff8822;color:var(--green);">Save 59%</mark></p>
      <button class="btn-pay" onclick="location.href='https://buy.stripe.com/test_6oE5ld6X7bkncGgbIJ'">Annual Best Deal</button>
    </div>
    <div class="card">
      <h3 style="font-size:1.7rem;margin-bottom:12px;">Lifetime</h3>
      <div class="price">$299</div>
      <p style="color:#aaa;margin:20px 0;">One-time payment<br>Own forever · All future updates</p>
      <button class="btn-pay" onclick="location.href='https://buy.stripe.com/test_14kdT96X79ef7s01bT'">Buy Lifetime Access</button>
    </div>
  </div>
  <p style="margin-top:50px;color:#888;font-size:14px;">Refresh page after payment to unlock permanently · Secured by Stripe global encryption</p>
</div>

<script>
const { DateTime } = luxon;
const IS_PRO = localStorage.getItem('inflection_pro') === 'forever' || new Date(localStorage.getItem('inflection_expiry') || 0) > new Date();

if (IS_PRO) {
  document.getElementById('watermark').style.display = 'none';
  document.getElementById('status').innerHTML = 'Pro Activated · Real-time';
  document.getElementById('status').style.background = 'linear-gradient(90deg,#00ff88,#00d4ff)';
  document.getElementById('status').style.color = '#000';
  document.getElementById('upgradeBtn').style.display = 'none';
} else {
  setInterval(() => { if (!IS_PRO) document.getElementById('paywall').style.display = 'flex'; }, 240000);
}

let chart, candleSeries, zzSeries;
let tf = '1m', symbol = 'BTCUSDT', ws;
const TF_SEC = { '1m':60, '5m':300, '15m':900, '1h':3600 };

function initChart() {
  chart = LightweightCharts.createChart(document.getElementById('chartContainer'), {
    width: document.getElementById('chartArea').clientWidth,
    height: document.getElementById('main').clientHeight,
    layout: { backgroundColor: '#000', textColor: '#d1d4dc' },
    grid: { vertLines: { color: '#1a1f2e' }, horzLines: { color: '#1a1f2e' } },
    timeScale: { timeVisible: true, secondsVisible: true },
  });
  candleSeries = chart.addCandlestickSeries({ upColor:'#00ff88', downColor:'#ff4757', wickUpColor:'#00ff88', wickDownColor:'#ff4757' });
  zzSeries = chart.addLineSeries({ color:'#ffaa00', lineWidth:2 });
}
initChart();

async function loadHistoricalData() {
  document.getElementById('signals').innerHTML = 'Loading historical data...';
  try {
    const resp = await fetch(`https://api.binance.com/api/v3/klines?symbol=${symbol}&interval=${tf}&limit=500`);
    const data = await resp.json();
    const cdata = data.map(d => ({ time: d[0]/1000, open: parseFloat(d[1]), high: parseFloat(d[2]), low: parseFloat(d[3]), close: parseFloat(d[4]) }));
    candleSeries.setData(cdata);
    document.getElementById('signals').innerHTML = 'Live · Ready';
  } catch(e) {
    document.getElementById('signals').innerHTML = 'Network error, retrying...';
    setTimeout(loadHistoricalData, 3000);
  }
}
loadHistoricalData();

function connect() {
  if (ws) ws.close();
  ws = new WebSocket(`wss://stream.binance.com:9443/stream?streams=${symbol.toLowerCase()}@kline_${tf}`);
  ws.onmessage = e => {
    const msg = JSON.parse(e.data);
    if (!msg.data?.k?.x) return;
    const k = msg.data.k;
    const candle = { time: Math.floor(k.t/1000), open: +k.o, high: +k.h, low: +k.l, close: +k.c };
    candleSeries.update(candle);
    if (IS_PRO) processCandle(candle);
    else setTimeout(() => processCandle(candle), 60000);
  };
  ws.onclose = () => setTimeout(connect, 3000);
}
connect();

function processCandle(latest) {
  const data = candleSeries.data().slice(-100);
  if (data.length < 30) return;
  const zz = calcZigZag(data, 0.004);
  document.getElementById('showZigZag').checked ? zzSeries.setData(zz) : zzSeries.setData([]);
  const fractals = findFractals(data);
  if (zz.length >= 2) {
    const last = zz[zz.length-1], prev = zz[zz.length-2];
    const confirm = fractals.slice(-10).some(f => Math.abs(f.time - last.time) <= TF_SEC[tf]*3 && ((prev.value > last.value && f.type === 'bottom') || (prev.value < last.value && f.type === 'top')));
    if (confirm && Math.abs(last.time - latest.time) < TF_SEC[tf]*2) addSignal(prev.value > last.value ? 'buy' : 'sell', last.value, last.time);
  }
}

function calcZigZag(data, dev=0.004) {
  const points = []; let dir=0, extreme=data[0];
  for (let i=1; i<data.length; i++) {
    const c = data[i];
    if (dir >= 0) { if (c.high > extreme.high) extreme=c;
      else if ((extreme.high-c.low)/extreme.high >= dev) { points.push({time:extreme.time,value:extreme.high}); dir=-1; extreme=c; }
    } else { if (c.low < extreme.low) extreme=c;
      else if ((c.high-extreme.low)/extreme.low >= dev) { points.push({time:extreme.time,value:extreme.low}); dir=1; extreme=c; }
    }
  }
  if (extreme) points.push(dir>0 ? {time:extreme.time,value:extreme.high} : {time:extreme.time,value:extreme.low});
  return points;
}

function findFractals(data) {
  const f = [];
  for (let i=2; i<data.length-2; i++) {
    const c = data[i];
    if (data[i-2].high < c.high && data[i-1].high < c.high && data[i+1].high < c.high && data[i+2].high < c.high) f.push({time:c.time,value:c.high,type:'top'});
    if (data[i-2].low > c.low && data[i-1].low > c.low && data[i+1].low > c.low && data[i+2].low > c.low) f.push({time:c.time,value:c.low,type:'bottom'});
  }
  return f;
}

function addSignal(type, price, time) {
  const dt = DateTime.fromSeconds(time).toFormat('MM-dd HH:mm:ss');
  const html = `<div class="signal ${type}">Signal ${dt} <strong>${type==='buy'?'LONG':'SHORT'}</strong> @ ${price.toFixed(2)}</div>`;
  const s = document.getElementById('signals');
  s.insertAdjacentHTML('afterbegin', html);
  if (s.children.length > 20) s.removeChild(s.lastChild);
  if (IS_PRO && document.getElementById('sound').checked) {
    speechSynthesis.speak(new SpeechSynthesisUtterance(type==='buy'?'Long signal':'Short signal'));
    alert(`Darrius FinTech · Inflection Hunter Pro\n${type==='buy'?'LONG SIGNAL':'SHORT SIGNAL'}\nPrice: ${price.toFixed(2)}`);
  }
}

document.querySelectorAll('.tf-btn').forEach(b=>b.onclick=()=>{ document.querySelector('.tf-btn.active').classList.remove('active'); b.classList.add('active'); tf = b.dataset.tf; loadHistoricalData(); connect(); });
document.getElementById('symbol').onchange=()=>{ symbol = this.value; loadHistoricalData(); connect(); };
document.getElementById('showZigZag').onchange=()=>{ if(candleSeries.data().length) processCandle(candleSeries.data().slice(-1)[0]); };

window.activatePro = function(type='forever') {
  if (type==='forever') localStorage.setItem('inflection_pro','forever');
  else { const d = new Date(); d.setMonth(d.getMonth() + (type==='year'?12:1)); localStorage.setItem('inflection_expiry', d.toISOString()); }
  alert('Pro Activated Successfully! Refreshing...');
  location.reload();
};

window.onresize = () => chart?.resize(document.getElementById('chartArea').clientWidth, document.getElementById('main').clientHeight);
</script>
</body>
</html>
